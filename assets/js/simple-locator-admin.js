jQuery(function(e){function l(){var l=e("#wpsl_address").val(),t=e("#wpsl_city").val(),a=e("#wpsl_state").val(),n=e("#wpsl_zip").val(),o=l+" "+t+" "+a+" "+n;return o}function t(l){geocoder=new google.maps.Geocoder,geocoder.geocode({address:l},function(l,t){if(t==google.maps.GeocoderStatus.OK){var n=l[0].geometry.location.lat(),o=l[0].geometry.location.lng();a(n,o),e("#publish").unbind("click").click()}else alert("The address could not be located.")})}function a(l,t){e("#wpsl_latitude").val(l),e("#wpsl_longitude").val(t)}function n(){if(e("#wpslmap").length>0){var l=e("#wpsl_latitude").val(),t=e("#wpsl_longitude").val();""!==l&&""!==t&&(e("#wpslmap").show(),o(l,t))}}function o(e,l){var t,a=new google.maps.Map(document.getElementById("wpslmap"),{zoom:14,center:new google.maps.LatLng(e,l),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,scaleControl:!1});t=new google.maps.Marker({position:new google.maps.LatLng(e,l),map:a})}var i=e("form[name='post']");e(i).find("#publish").on("click",function(e){e.preventDefault();var a=l();t(a)}),e(document).ready(function(){n()}),e(document).ready(function(){var l=e("#wpsl_post_type").val();"location"!==l&&(e("#field_wpsl").attr("disabled","disabled").removeAttr("checked"),e("#field_custom").attr("checked","checked"));var t=e('input[name="wpsl_field_type"]:checked').val();"wpsl"===t&&e(".latlng").hide()}),e(document).on("change","#wpsl_post_type",function(){var l=e(this).val();"location"!==l?(e("#field_wpsl").attr("disabled","disabled").removeAttr("checked"),e("#field_custom").attr("checked","checked"),e(".latlng").show()):e("#field_wpsl").removeAttr("disabled")}),e(document).on("change",'input[name="wpsl_field_type"]:radio',function(){var l=e(this).val();if("wpsl"==l)e(".latlng").hide(),e("#wpsl_lat_field").val("wpsl_latitude"),e("#wpsl_lng_field").val("wpsl_longitude");else{e(".latlng").show();var t=e("#lat_select").val(),a=e("#lng_select").val();e("#wpsl_lat_field").val(t),e("#wpsl_lng_field").val(a)}}),e(document).on("change","#lat_select",function(){var l=e(this).val();e("#wpsl_lat_field").val(l)}),e(document).on("change","#lng_select",function(){var l=e(this).val();e("#wpsl_lng_field").val(l)}),e(document).ready(function(){e(document).on("click","#upload_image_button",function(){return formfield=e("#upload_image").attr("name"),tb_show("","media-upload.php?type=image&TB_iframe=true"),!1}),window.send_to_editor=function(l){imgurl=e("img",l).attr("src");var t='<img src="'+imgurl+'" id="map-pin-image" />';t+='<input id="remove_map_pin" type="button" value="Remove" class="button action" style="margin-right:5px;margin-left:10px;" />',e("#map-pin-image-cont").append(t),e("#upload_image_button").remove(),e("#wpsl_map_pin").val(imgurl),tb_remove()}}),e(document).on("click","#remove_map_pin",function(l){l.preventDefault(),e("#map-pin-image").remove(),e("#wpsl_map_pin").prop("value",""),e("#map-pin-image-cont").append('<input id="upload_image_button" type="button" value="Upload" class="button action" />'),e(this).remove()})});